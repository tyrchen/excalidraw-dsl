# **ä¸º Excalidraw è®¾è®¡ä¸€ç§å¯Œæœ‰è¡¨ç°åŠ›çš„å£°æ˜å¼è¯­è¨€ï¼šæ¶æ„ä¸å®ç°è“å›¾**

æœ¬æŠ¥å‘Šæ—¨åœ¨ä¸ºè®¾è®¡å’Œå®ç°ä¸€ä¸ªé¢å‘ Excalidraw çš„é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDomain-Specific Language, DSLï¼‰æä¾›ä¸€ä»½è¯¦å°½çš„æ¶æ„è“å›¾ã€‚è¯¥è¯­è¨€æˆ‘ä»¬ç§°ä¹‹ä¸º ExcaliDraw-DSL (EDSL)ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯èåˆ Mermaid.js çš„ç®€æ´æ€§ä¸ Excalidraw ç‹¬ç‰¹çš„â€œæ‰‹ç»˜é£æ ¼â€è¡¨ç°åŠ›ã€‚æ•´ä¸ªç³»ç»Ÿä¸ä»…åŒ…æ‹¬ EDSL çš„è¯­è¨€è§„èŒƒï¼Œè¿˜æ¶µç›–äº†åŸºäº Rust çš„ç¼–è¯‘å™¨ï¼ˆè§£æå™¨ä¸å¸ƒå±€å¼•æ“ï¼‰ä»¥åŠä¸€ä¸ªåˆ›æ–°çš„ã€åˆ©ç”¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¿›è¡Œæ™ºèƒ½å¸ƒå±€ä¼˜åŒ–çš„æ¡†æ¶ã€‚æ­¤è“å›¾æ—¨åœ¨ä¸ºè´Ÿè´£è¯¥ç³»ç»Ÿå®ç°çš„æŠ€æœ¯å›¢é˜Ÿæä¾›ä¸€ä»½å…¨é¢ã€å¯è¡Œçš„æŠ€æœ¯æŒ‡å—ã€‚

## **ç¬¬ä¸€éƒ¨åˆ†ï¼šExcaliDraw-DSL (EDSL) \- ä¸€ç§ä¸ºè¡¨ç°åŠ›è€Œç”Ÿçš„æ‰‹ç»˜é£æ ¼å›¾è¡¨è¯­è¨€**

æœ¬éƒ¨åˆ†å°†è¯¦ç»†é˜è¿° EDSL çš„æ ¸å¿ƒè®¾è®¡å“²å­¦ã€è¯­æ³•è§„èŒƒï¼Œå¹¶å°†å…¶ä¸ç°æœ‰å·¥å…·è¿›è¡Œå¯¹æ¯”åˆ†æï¼Œä»¥æ˜ç¡®å…¶ç‹¬ç‰¹çš„ä»·å€¼å®šä½ã€‚

### **A. æ ¸å¿ƒå“²å­¦ï¼šèåˆç®€æ´æ€§ä¸ Excalidraw çš„ç²¾é«“**

EDSL çš„è®¾è®¡åˆè¡·å¹¶éç®€å•åœ°å¤åˆ¶ç°æœ‰å·¥å…·ï¼Œè€Œæ˜¯è¦æ„å»ºä¸€ç§èƒ½å¤ŸåŸç”Ÿè¡¨è¾¾ Excalidraw è§†è§‰ç‰¹è´¨çš„è¯­è¨€ã€‚å…¶è®¾è®¡å“²å­¦æ ¹æ¤äºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒåŸåˆ™ã€‚

1\. å£°æ˜å¼ä¸å¯è¯»æ€§ä¼˜å…ˆ  
è¯­è¨€çš„è¯­æ³•åº”ä¸“æ³¨äºæè¿°â€œç”»ä»€ä¹ˆâ€ï¼Œè€Œéâ€œå¦‚ä½•ç”»â€ã€‚å€Ÿé‰´ Mermaid.js çš„æˆåŠŸç»éªŒï¼ŒEDSL çš„åŸºç¡€è¯­æ³•å°†ä¿æŒé«˜åº¦çš„å¯è¯»æ€§å’Œç®€æ´æ€§ï¼Œä½¿å…¶å¯¹å¹¿å¤§å¼€å‘è€…å’ŒæŠ€æœ¯æ–‡æ¡£æ’°å†™è€…éƒ½æ˜“äºä¸Šæ‰‹ 1ã€‚ä¸€ä¸ªç®€å•çš„å…³ç³»  
A \-\> B åº”å½“ç›´è§‚ä¸”æ— éœ€å¤æ‚çš„æ ·æ¿ä»£ç ã€‚

2\. Excalidraw åŸç”Ÿç‰¹æ€§ä½œä¸ºä¸€ç­‰å…¬æ°‘  
ç°æœ‰å·¥å…·é“¾ï¼Œå¦‚ mermaid-to-excalidrawï¼Œåœ¨è½¬æ¢è¿‡ç¨‹ä¸­å­˜åœ¨æ˜¾è‘—çš„ä¿¡æ¯æŸå¤± 3ã€‚è®¸å¤š Mermaid çš„å›¾å½¢æ¦‚å¿µï¼ˆå¦‚  
subroutineã€hexagonï¼‰åœ¨ Excalidraw ä¸­æ²¡æœ‰ç›´æ¥å¯¹åº”ç‰©ï¼Œæœ€ç»ˆåªèƒ½é™çº§ä¸ºæ™®é€šçš„çŸ©å½¢ã€‚è¿™æ­ç¤ºäº†ä¸€ä¸ªæ ¹æœ¬æ€§çš„é—®é¢˜ï¼šMermaid çš„è¯­ä¹‰æ¨¡å‹ä¸è¶³ä»¥æ‰¿è½½ Excalidraw çš„è¡¨ç°åŠ›ã€‚

Excalidraw çš„é­…åŠ›ä¸ä»…åœ¨äºå…¶å›¾å½¢é›†åˆï¼Œæ›´åœ¨äºå…¶ç‹¬ç‰¹çš„è§†è§‰é£æ ¼ï¼Œä¾‹å¦‚å…ƒç´ çš„â€œç²—ç³™æ„Ÿâ€ï¼ˆroughnessï¼‰ã€å¡«å……æ ·å¼ï¼ˆhachureã€solidï¼‰ã€å­—ä½“ï¼ˆVirgilï¼‰å’Œè¾¹æ¡†å®½åº¦ç­‰ 4ã€‚è¿™äº›æ˜¯ä¼ ç»Ÿå›¾è¡¨å·¥å…·æ‰€ä¸å…·å¤‡çš„ã€‚å› æ­¤ï¼ŒEDSL å¿…é¡»å°†è¿™äº›è§†è§‰å±æ€§æå‡ä¸ºè¯­è¨€çš„ä¸€ç­‰å…¬æ°‘ã€‚è®¾è®¡ä¸Šå°†æ‘’å¼ƒ Mermaid æœ‰é™çš„ç±» CSS æ ·å¼ 1ï¼Œè½¬è€Œå€Ÿé‰´ D2 çš„

style ä»£ç å— 6 å’Œ Graphviz å¼ºå¤§çš„å±æ€§ç³»ç»Ÿ

\[attr=value\] 7ï¼Œå…è®¸å¯¹ Excalidraw çš„æ¯ä¸€ä¸ªè§†è§‰å‚æ•°è¿›è¡Œç²¾ç¡®æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¼•å…¥

sketchiness: highã€fill: hachure ç­‰åŸç”Ÿå…³é”®å­—ã€‚

3\. æ¸è¿›å¼å¤æ‚åº¦  
ç³»ç»Ÿåº”éµå¾ªâ€œæ˜“äºä¸Šæ‰‹ï¼Œéš¾äºç²¾é€šâ€çš„åŸåˆ™ã€‚å¯¹äºåˆçº§ç”¨æˆ·ï¼Œå¯ä»¥ä»…ç”¨å‡ è¡Œä»£ç å¿«é€Ÿç”Ÿæˆä¸€ä¸ªåŸºç¡€æµç¨‹å›¾ã€‚å¯¹äºé«˜çº§ç”¨æˆ·ï¼Œè¯­è¨€æä¾›äº†ä¸°å¯Œçš„æ ·å¼å—å’Œé…ç½®é€‰é¡¹ï¼Œä»¥å®ç°å¯¹å›¾è¡¨å¤–è§‚çš„åƒç´ çº§æ§åˆ¶ã€‚è¿™ç§åˆ†å±‚è®¾è®¡ç¡®ä¿äº†è¯­è¨€çš„å¹¿æ³›é€‚ç”¨æ€§ã€‚  
4\. å¼ºå¤§çš„å®¹å™¨åŒ–ä¸åˆ†ç»„èƒ½åŠ›  
å¤æ‚çš„å›¾è¡¨é€šå¸¸éœ€è¦å°†ç›¸å…³èŠ‚ç‚¹ç»„ç»‡åœ¨ä¸€èµ·ã€‚Mermaid çš„ subgraph 8 åŠŸèƒ½å°šå¯ï¼Œä½† D2 9 å’Œ Graphviz 7 æä¾›äº†æ›´ä¸ºå¼ºå¤§å’Œçµæ´»çš„å®¹å™¨åŒ–ï¼ˆæˆ–é›†ç¾¤ï¼‰è¯­æ³•ã€‚EDSL å°†é‡‡ç”¨ç±»ä¼¼ D2 çš„  
container {} å—çŠ¶è¯­æ³•ï¼Œæ”¯æŒå®¹å™¨çš„åµŒå¥—ã€ç‹¬ç«‹æ ·å¼å®šä¹‰ä»¥åŠå®¹å™¨é—´çš„è¿æ¥ï¼Œä»è€Œå®ç°æ›´æ¸…æ™°çš„é€»è¾‘åˆ†åŒºã€‚

### **B. EDSL è¯­æ³•ä¸è§„èŒƒï¼ˆææ¡ˆï¼‰**

åŸºäºä¸Šè¿°å“²å­¦ï¼Œæˆ‘ä»¬æå‡ºä»¥ä¸‹ EDSL è¯­æ³•è§„èŒƒï¼Œæ—¨åœ¨å®ç°ç®€æ´æ€§ä¸è¡¨ç°åŠ›çš„å¹³è¡¡ã€‚

1\. å…¨å±€é…ç½®  
å— Mermaid config å—çš„å¯å‘ 10ï¼ŒEDSL å°†ä½¿ç”¨ YAML Frontmatter æ¥å®šä¹‰å…¨å±€æ ·å¼å’Œå¸ƒå±€å‚æ•°ã€‚è¿™ä½¿å¾—å›¾è¡¨çš„æ•´ä½“é£æ ¼é…ç½®ä¸å†…å®¹å®šä¹‰æ¸…æ™°åˆ†ç¦»ã€‚

YAML

\---  
theme: dark  
layout: dagre \# å¯é€‰ dagre, force, elk ç­‰  
font: Virgil \# Excalidraw æ”¯æŒçš„å­—ä½“  
sketchiness: 2 \# 0: Off, 1: Low, 2: High  
\---

\# EDSL å›¾è¡¨å®šä¹‰

2\. èŠ‚ç‚¹å®šä¹‰  
èŠ‚ç‚¹å®šä¹‰é‡‡ç”¨ id\[label\] {...style } çš„æ ¼å¼ã€‚id æ˜¯èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œlabel æ˜¯æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œå¯é€‰çš„ {} æ ·å¼å—ç”¨äºå®šä¹‰èŠ‚ç‚¹çš„å…·ä½“å±æ€§ã€‚è¿™ç§è¯­æ³•æ¯” Mermaid ç¹æ‚çš„æ‹¬å·å˜ä½“ï¼ˆå¦‚ ()ã€\`\`ã€{}ã€(())ï¼‰æ›´åŠ æ¸…æ™°å’Œå¯æ‰©å±• 8ã€‚

* **åŸºç¡€èŠ‚ç‚¹**: web\_server  
* **å¸¦æ ·å¼çš„èŠ‚ç‚¹**:  
  Code snippet  
  db\_server {  
    shape: cylinder;  
    fill: hachure;  
    fillWeight: 2; // hachure å¡«å……çš„å¯†åº¦  
    strokeColor: '\#868e96';  
    roughness: 2;  
  }

3\. å½¢çŠ¶è¯æ±‡è¡¨  
EDSL çš„ shape å±æ€§å°†ç›´æ¥æ˜ å°„åˆ° Excalidraw çš„æ ¸å¿ƒå›¾å½¢ï¼Œå¦‚ rectangleã€ellipseã€diamondã€cylinderã€arrowã€line å’Œ text 3ã€‚è¿™é¿å…äº†ç°æœ‰å·¥å…·ä¸­å› å½¢çŠ¶ä¸åŒ¹é…è€Œå¯¼è‡´çš„å›é€€é—®é¢˜ã€‚  
4\. è¿æ¥ï¼ˆè¾¹ï¼‰å®šä¹‰  
è¿æ¥çš„å®šä¹‰æ ¼å¼ä¸º id1 \-\> id2: "label" {...style }ã€‚

* **ç®­å¤´ç±»å‹**:  
  * \-\>: å•å‘ç®­å¤´  
  * \--: æ— ç®­å¤´ç›´çº¿  
  * \<-\>: åŒå‘ç®­å¤´  
  * \~\>: æ³¢æµªçº¿ç®­å¤´ï¼ˆæœªæ¥æ‰©å±•ï¼‰  
* **æ ·å¼æ§åˆ¶**:  
  Code snippet  
  user \-\> api\_gateway: "POST /data" {  
    strokeStyle: dotted;  
    startArrowhead: dot;  
    endArrowhead: triangle;  
    font: "Cascadia Code";  
  }

* **é“¾å¼å®šä¹‰**: æ”¯æŒ A \-\> B \-\> C çš„ç®€æ´é“¾å¼è¯­æ³•ã€‚

5\. å®¹å™¨ï¼ˆå­å›¾ï¼‰å®šä¹‰  
é‡‡ç”¨ D2 é£æ ¼çš„å®¹å™¨è¯­æ³•ï¼Œä½¿å…¶æˆä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ ·å¼å’Œ IDã€‚

Code snippet

container "Backend Services" as backend {  
  style: {  
    labelPosition: top;  
    backgroundColor: '\#f8f9fa';  
    roughness: 0;  
  }

  api\_gateway\[API Gateway\] { shape: rectangle; }  
  user\_service  
  auth\_service

  api\_gateway \-\> user\_service;  
  api\_gateway \-\> auth\_service;  
}

\# å®¹å™¨å¯ä»¥ä¸å…¶ä»–èŠ‚ç‚¹æˆ–å®¹å™¨è¿æ¥  
user\_browser \-\> backend.api\_gateway;  
backend \-\> db\_server;

6\. æ–‡æœ¬ä¸æ ‡ç­¾  
æ–‡æœ¬å¯ä»¥æ˜¯ç‹¬ç«‹å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ç»‘å®šåˆ°å½¢çŠ¶æˆ–è¿æ¥ä¸Šã€‚EDSL è¯­æ³•å°†æ˜ç¡®æ”¯æŒè¿™ä¸¤ç§ç”¨æ³•ï¼Œç›´æ¥æ˜ å°„åˆ° Excalidraw çš„ label å’Œ boundElements æ¦‚å¿µ 5ã€‚

* **ç‹¬ç«‹æ–‡æœ¬**: info\_text: "This is a note." { shape: text; }  
* **ç»‘å®šæ–‡æœ¬ (æ ‡ç­¾)**: å·²åœ¨èŠ‚ç‚¹å’Œè¿æ¥å®šä¹‰ä¸­ä½“ç°ã€‚

### **C. å¯¹æ¯”åˆ†æä¸è¯„ä¼°**

ä¸ºäº†è¯æ˜åˆ›å»ºæ–° DSL çš„å¿…è¦æ€§ï¼Œä¸‹è¡¨å°† EDSL ä¸ä¸»æµçš„å›¾è¡¨å³ä»£ç å·¥å…·åœ¨ Excalidraw ç”Ÿæˆåœºæ™¯ä¸‹è¿›è¡Œå¯¹æ¯”ã€‚

| ç‰¹æ€§ | ExcaliDraw-DSL (EDSL) | Mermaid | D2 | PlantUML |
| :---- | :---- | :---- | :---- | :---- |
| **ä¸Šæ‰‹ç®€æ˜“åº¦** | é«˜ (ç±» Mermaid åŸºç¡€è¯­æ³•) | é«˜ 1 | ä¸­ | ä¸­ 2 |
| **è¡¨ç°åŠ›** | éå¸¸é«˜ | ä¸­ä½ | é«˜ 12 | éå¸¸é«˜ 13 |
| **Excalidraw é£æ ¼æ§åˆ¶** | **åŸç”Ÿ** (å¦‚ roughness) | ä½ (é€šç”¨ CSS) 1 | ä¸­ (å¯æ‰©å±•æ ·å¼) | ä½ (Skinparams) |
| **åŸç”Ÿå½¢çŠ¶æ˜ å°„** | **1:1 æ˜ å°„** | å·® (å¤§é‡å›é€€) 3 | å¥½ (ä½†ä¸ç‰¹å®š) | å¥½ (UML æ ¸å¿ƒ) |
| **å®¹å™¨åŒ–èƒ½åŠ›** | ä¼˜ç§€ (D2 é£æ ¼) | å¥½ (subgraph) 8 | ä¼˜ç§€ 9 | å¥½ (package) |
| **å¸ƒå±€æç¤º** | åŸç”Ÿ (layout:...) | å¥½ (graph TD/LR) | ä¼˜ç§€ (direction:...) | å¥½ |
| **LLM ç”Ÿæˆå‹å¥½åº¦** | é«˜ | é«˜ | ä¸­ | ä¸­ä½ |

åˆ†ææ˜¾ç¤ºï¼Œè™½ç„¶ Mermaid å’Œ PlantUML åœ¨å„è‡ªé¢†åŸŸéå¸¸å¼ºå¤§ï¼Œä½†å®ƒä»¬çš„è®¾è®¡å“²å­¦ä¸ Excalidraw çš„è§†è§‰ç‰¹è´¨å­˜åœ¨æ ¹æœ¬æ€§å·®å¼‚ã€‚D2 æ˜¯ä¸€ä¸ªå¼ºæœ‰åŠ›çš„ç°ä»£ç«äº‰è€…ï¼Œä½†å®ƒåŒæ ·æ˜¯é€šç”¨ç›®çš„çš„ã€‚EDSL çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶ **ä¸“ä¸º Excalidraw è®¾è®¡**ï¼Œå°† Excalidraw çš„é£æ ¼å±æ€§æ— ç¼èå…¥è¯­è¨€æœ¬èº«ï¼Œä»è€Œåœ¨ç”Ÿæˆé«˜è´¨é‡ã€å¯Œæœ‰è¡¨ç°åŠ›çš„ Excalidraw å›¾è¡¨æ–¹é¢ï¼Œæä¾›äº†å…¶ä»–å·¥å…·æ— æ³•æ¯”æ‹Ÿçš„æ§åˆ¶åŠ›å’ŒåŸç”Ÿæ”¯æŒã€‚è¿™è¯æ˜äº†å¼€å‘ EDSL ä¸ä»…æ˜¯åˆç†çš„ï¼Œè€Œä¸”æ˜¯å®ç°ç”¨æˆ·ç›®æ ‡çš„å¿…è¦æ­¥éª¤ã€‚

## **ç¬¬äºŒéƒ¨åˆ†ï¼šç¼–è¯‘å™¨ç®¡é“ \- ä» EDSL åˆ° Excalidraw JSON**

æœ¬éƒ¨åˆ†å°†è¯¦ç»†ä»‹ç»å°† EDSL æ–‡æœ¬è½¬æ¢ä¸ºæœ€ç»ˆå¯æ¸²æŸ“çš„ Excalidraw JSON çš„ç¼–è¯‘å™¨æ¶æ„ã€‚è¯¥ç¼–è¯‘å™¨å°†é‡‡ç”¨ Rust è¯­è¨€å®ç°ï¼Œä»¥ä¿è¯æ€§èƒ½å’Œå†…å­˜å®‰å…¨ã€‚

### **A. æ¶æ„è“å›¾**

æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹è¢«è®¾è®¡æˆä¸€ä¸ªæ¸…æ™°çš„ã€æ¨¡å—åŒ–çš„æµæ°´çº¿ã€‚æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä¾¿äºç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œç»´æŠ¤ã€‚

**ç¼–è¯‘æµç¨‹å›¾:**

EDSL æ–‡æœ¬ \-\> \[è§£æå™¨ (Parser)\] \-\> ä¸­é—´å›¾è¡¨ç¤º (IGR) \-\> \[å¸ƒå±€å¼•æ“ (Layout Engine)\] \-\> å®šä½åçš„ IGR \-\> \[ç”Ÿæˆå™¨ (Generator)\] \-\> ExcalidrawElementSkeleton \-\> (Excalidraw åº“) \-\> æœ€ç»ˆ Excalidraw JSON

**ç»„ä»¶è§’è‰²å®šä¹‰:**

1. **è§£æå™¨ (Parser)**: æ¥æ”¶ EDSL çº¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œé€šè¿‡è¯­æ³•åˆ†æï¼Œå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªç»“æ„åŒ–çš„ã€å†…å­˜ä¸­çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå¹¶æœ€ç»ˆæ„å»ºæˆä¸­é—´å›¾è¡¨ç¤ºï¼ˆIGRï¼‰ã€‚  
2. **ä¸­é—´å›¾è¡¨ç¤º (Intermediate Graph Representation, IGR)**: ä¸€ä¸ªç‹¬ç«‹äºå¸ƒå±€å’Œæ¸²æŸ“çš„ã€çº¯ç²¹çš„å›¾æ•°æ®ç»“æ„ã€‚å®ƒåŒ…å«äº†æ‰€æœ‰çš„èŠ‚ç‚¹ã€è¾¹ã€å®¹å™¨åŠå…¶å±æ€§ï¼Œæ˜¯æ•´ä¸ªç®¡é“çš„æ ¸å¿ƒæ•°æ®æ¨¡å‹ã€‚  
3. **å¸ƒå±€å¼•æ“ (Layout Engine)**: æ¥æ”¶ IGRï¼Œæ ¹æ®ç”¨æˆ·åœ¨ EDSL ä¸­æŒ‡å®šçš„å¸ƒå±€ç®—æ³•ï¼ˆæˆ–é»˜è®¤ç®—æ³•ï¼‰ï¼Œè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹å’Œå®¹å™¨çš„ x, y åæ ‡ã€‚å…¶è¾“å‡ºæ˜¯ä¸€ä¸ªå¸¦æœ‰ä½ç½®ä¿¡æ¯çš„ IGRã€‚  
4. **ç”Ÿæˆå™¨ (Generator)**: æ¥æ”¶å®šä½åçš„ IGRï¼Œå°†å…¶è½¬æ¢ä¸º Excalidraw å®˜æ–¹æ¨èçš„ ExcalidrawElementSkeleton æ ¼å¼çš„æ•°ç»„ã€‚  
5. **Excalidraw åº“**: æœ€ç»ˆï¼Œç”± Excalidraw è‡ªèº«çš„å‰ç«¯åº“ï¼ˆæˆ–å…¶é€»è¾‘çš„ Rust å®ç°ï¼‰å°† ExcalidrawElementSkeleton æ•°ç»„â€œè†¨åŒ–â€ä¸ºå®Œæ•´çš„ã€å¯æ¸²æŸ“çš„ Excalidraw JSON å¯¹è±¡ã€‚

### **B. è§£æå™¨ï¼šå°†æ–‡æœ¬è½¬æ¢ä¸ºç»“æ„åŒ–æ¨¡å‹**

è§£æå™¨çš„é€‰æ‹©å¯¹äº DSL çš„å¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§è‡³å…³é‡è¦ã€‚

1\. æŠ€æœ¯é€‰å‹ï¼špest vs. nom  
åœ¨ Rust ç”Ÿæ€ä¸­ï¼Œpest å’Œ nom æ˜¯ä¸¤ä¸ªæœ€ä¸»æµçš„è§£æå™¨åº“ 14ã€‚

* **nom**: ä¸€ä¸ªè§£æå™¨ç»„åˆå­ï¼ˆparser-combinatorï¼‰åº“ã€‚å¼€å‘è€…é€šè¿‡ Rust çš„å‡½æ•°å’Œå®æ¥æ„å»ºè§£æé€»è¾‘ 15ã€‚å®ƒä»¥é›¶æ‹·è´å’Œé«˜æ€§èƒ½è‘—ç§°ï¼Œç‰¹åˆ«é€‚åˆäºŒè¿›åˆ¶æ ¼å¼å’Œå¯¹æ€§èƒ½è¦æ±‚æè‡´çš„åœºæ™¯ 16ã€‚  
* **pest**: ä¸€ä¸ªåŸºäºè§£æè¡¨è¾¾è¯­æ³•ï¼ˆPEGï¼‰çš„è§£æå™¨ç”Ÿæˆå™¨ã€‚å¼€å‘è€…åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ .pest æ–‡ä»¶ä¸­ç”¨ç±»ä¼¼ BNF çš„è¯­æ³•æ¥å®šä¹‰æ–‡æ³•ï¼Œpest ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ Rust è§£ææ¨¡å— 14ã€‚

å°½ç®¡æ€§èƒ½æ˜¯é‡è¦è€ƒé‡ï¼Œä½†ç›¸å…³çš„åŸºå‡†æµ‹è¯•å’Œè®¨è®ºè¡¨æ˜ï¼Œä¸¤è€…åœ¨è§£ææ–‡æœ¬ DSL æ—¶çš„æ€§èƒ½å·®å¼‚é€šå¸¸å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œä¸”æ€§èƒ½æ¯”è¾ƒææ˜“å—åˆ°æµ‹è¯•åœºæ™¯è¯¯å¯¼ 18ã€‚å¯¹äº EDSL è¿™ä¸ªé¡¹ç›®è€Œè¨€ï¼Œæ›´å…³é”®çš„å› ç´ æ˜¯å¼€å‘ä½“éªŒå’Œé•¿æœŸå¯ç»´æŠ¤æ€§ã€‚

pest å°†æ–‡æ³•å®šä¹‰ï¼ˆâ€œä»€ä¹ˆâ€æ˜¯åˆæ³•çš„ EDSLï¼‰ä¸è§£æé€»è¾‘ï¼ˆâ€œå¦‚ä½•â€å¤„ç†è§£æç»“æœï¼‰å®Œå…¨åˆ†ç¦»ã€‚è¿™ç§å…³æ³¨ç‚¹åˆ†ç¦»çš„æ¶æ„ä¼˜åŠ¿æ˜¯å·¨å¤§çš„ï¼š

* **å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§**: .pest æ–‡æ³•æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸€ä»½æ¸…æ™°çš„è¯­è¨€è§„èŒƒæ–‡æ¡£ï¼Œæ˜“äºé˜…è¯»å’Œä¿®æ”¹ã€‚å½“ EDSL æ¼”è¿›æ—¶ï¼Œä¿®æ”¹æ–‡æ³•æ–‡ä»¶æ¯”ä¿®æ”¹ nom ä¸­å¤æ‚çš„å®åµŒå¥—ä»£ç è¦ç›´è§‚å¾—å¤š 17ã€‚  
* **å¼€å‘æ•ˆç‡**: è¯­è¨€è®¾è®¡è€…å¯ä»¥ä¸“æ³¨äºæ–‡æ³•æ–‡ä»¶ï¼Œè€Œç¼–è¯‘å™¨å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºå¤„ç† pest ç”Ÿæˆçš„è§£ææ ‘ï¼Œä¸¤è€…å¯ä»¥å¹¶è¡Œå·¥ä½œã€‚

å› æ­¤ï¼Œæœ¬é¡¹ç›® **æ¨èä½¿ç”¨ pest**ã€‚å…¶åœ¨ DSL å¼€å‘ä¸­çš„äººä½“å·¥ç¨‹å­¦ä¼˜åŠ¿è¿œè¶… nom åœ¨æ­¤åœºæ™¯ä¸‹å¯èƒ½å¸¦æ¥çš„å¾®å¼±æ€§èƒ½ä¼˜åŠ¿ã€‚

**2\. å®æ–½è®¡åˆ’**

* **åˆ›å»º edsl.pest æ–‡æ³•æ–‡ä»¶**: å®šä¹‰ EDSL çš„æ ¸å¿ƒè¯­æ³•è§„åˆ™ã€‚  
  Code snippet  
  // edsl.pest \- A simplified grammar skeleton  
  WHITESPACE \= \_{ " " | "\\t" | NEWLINE }  
  COMMENT \= \_{ "\#" \~ (\!NEWLINE \~ ANY)\* }

  // Top level rule  
  file \= { SOI \~ (config)? \~ statement\* \~ EOI }

  config \= { "---" \~ yaml\_content \~ "---" }  
  yaml\_content \= {... } // Rule for YAML content

  statement \= { node\_def | edge\_def | container\_def }

  node\_def \= { id \~ ("\[" \~ label \~ "\]")? \~ (style\_block)? }  
  edge\_def \= { id \~ arrow \~ id \~ (":" \~ label)? \~ (style\_block)? }  
  container\_def \= { "container" \~ (label)? \~ ("as" \~ id)? \~ "{" \~ statement\* \~ "}" }

  id \= @{ (ASCII\_ALPHANUMERIC | "\_")+ }  
  label \= @{ "\\"" \~ (\!"\\"" \~ ANY)\* \~ "\\"" }  
  arrow \= { "-\>" | "--" | "\<-\>" }  
  style\_block \= { "{" \~ attribute\* \~ "}" }  
  attribute \= { id \~ ":" \~ value \~ ";" }  
  value \= {... } // Rules for string, number, etc.

* **ç¼–å†™ Rust è§£æé€»è¾‘**: ä½¿ç”¨ pest ç”Ÿæˆçš„ EDSLParserï¼Œéå†è§£ææˆåŠŸåäº§ç”Ÿçš„ Pair æ ‘ï¼Œå¹¶é€ä¸€æ„å»º IGR çš„å„ä¸ªéƒ¨åˆ†ï¼ˆèŠ‚ç‚¹ã€è¾¹ã€å®¹å™¨å’Œå±æ€§ï¼‰ã€‚

### **C. ä¸­é—´å›¾è¡¨ç¤º (IGR)**

IGR æ˜¯è¿æ¥è§£æå™¨å’Œå¸ƒå±€å¼•æ“çš„æ¡¥æ¢ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ IGR åº”èƒ½å®Œæ•´åœ°è¡¨ç¤ºå›¾çš„æ‹“æ‰‘ç»“æ„å’Œæ‰€æœ‰å…ƒæ•°æ®ã€‚

1\. æŠ€æœ¯é€‰å‹ï¼špetgraph  
petgraph æ˜¯ Rust ç”Ÿæ€ä¸­åŠŸèƒ½æœ€å¼ºå¤§ã€æœ€æˆç†Ÿçš„å›¾æ•°æ®ç»“æ„åº“ 19ã€‚å®ƒæä¾›äº†å¤šç§å›¾çš„å®ç°ï¼ˆå¦‚  
Graph, StableGraphï¼‰ï¼Œå¹¶å…è®¸åœ¨èŠ‚ç‚¹å’Œè¾¹ä¸Šé™„åŠ ä»»æ„ç±»å‹çš„æ•°æ®ï¼ˆç§°ä¸ºâ€œæƒé‡â€ï¼‰19ã€‚è¿™ä¸æˆ‘ä»¬çš„éœ€æ±‚å®Œç¾å¥‘åˆï¼Œå› ä¸º EDSL çš„èŠ‚ç‚¹å’Œè¾¹éƒ½æºå¸¦äº†ä¸°å¯Œçš„å±æ€§ä¿¡æ¯ã€‚

petgraph å·²æˆä¸ºäº‹å®ä¸Šçš„æ ‡å‡†ï¼Œè¢«è®¸å¤šå…¶ä»–å›¾ç›¸å…³çš„ Rust åº“ï¼ˆåŒ…æ‹¬ä¸€äº›å¸ƒå±€å¼•æ“ï¼‰æ‰€ä¾èµ– 22ã€‚

2\. IGR æ•°æ®ç»“æ„å®šä¹‰  
æˆ‘ä»¬å°†ä½¿ç”¨ petgraph::Graphï¼ˆå…·ä½“ä¸ºæœ‰å‘å›¾ DiGraphï¼‰ä½œä¸º IGR çš„æ ¸å¿ƒã€‚

Rust

// åœ¨ IGR æ¨¡å—ä¸­å®šä¹‰  
use petgraph::graph::DiGraph;  
use std::collections::HashMap;

// ç”¨äºå­˜å‚¨æ‰€æœ‰ä» EDSL è§£æå‡ºçš„æ ·å¼å±æ€§  
\#  
pub struct EDSLAttributes {  
    pub shape: Option\<String\>,  
    pub stroke\_color: Option\<String\>,  
    pub background\_color: Option\<String\>,  
    pub fill\_style: Option\<String\>, // e.g., "hachure", "solid"  
    pub stroke\_width: Option\<f64\>,  
    pub roughness: Option\<u32\>,  
    pub font: Option\<String\>,  
    //... å…¶ä»– Excalidraw å±æ€§  
}

\#  
pub struct NodeData {  
    pub id: String,         // EDSL ä¸­å®šä¹‰çš„ ID  
    pub label: String,  
    pub attrs: EDSLAttributes,  
    // å¸ƒå±€åä¼šå¡«å……  
    pub x: f64,  
    pub y: f64,  
    pub width: f64,         // åˆå§‹å°ºå¯¸ï¼Œå¯èƒ½éœ€è¦æ ¹æ®æ–‡æœ¬è®¡ç®—  
    pub height: f64,  
}

\#  
pub struct EdgeData {  
    pub label: Option\<String\>,  
    pub attrs: EDSLAttributes,  
}

// å®¹å™¨æ•°æ®  
\#  
pub struct ContainerData {  
    pub id: Option\<String\>,  
    pub label: Option\<String\>,  
    pub children: Vec\<petgraph::graph::NodeIndex\>, // åŒ…å«çš„èŠ‚ç‚¹çš„ç´¢å¼•  
    pub attrs: EDSLAttributes,  
}

// æœ€ç»ˆçš„ IGR ç»“æ„  
pub struct IntermediateGraph {  
    pub graph: DiGraph\<NodeData, EdgeData\>,  
    pub global\_attrs: EDSLAttributes,  
    pub containers: Vec\<ContainerData\>,  
    // ç”¨äºä» EDSL ID å¿«é€Ÿæ˜ å°„åˆ° petgraph çš„ NodeIndex  
    pub node\_map: HashMap\<String, petgraph::graph::NodeIndex\>,  
}

è¿™ä¸ªç»“æ„æ¸…æ™°åœ°å°†å›¾çš„æ‹“æ‰‘ï¼ˆDiGraphï¼‰ã€èŠ‚ç‚¹/è¾¹çš„å…ƒæ•°æ®ï¼ˆNodeData, EdgeDataï¼‰ä»¥åŠå®¹å™¨ä¿¡æ¯åˆ†ç¦»å¼€æ¥ï¼Œä¸ºåç»­çš„å¸ƒå±€å’Œç”Ÿæˆé˜¶æ®µæä¾›äº†å¹²å‡€ã€è§„æ•´çš„è¾“å…¥ã€‚

## **ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¸ƒå±€å¼•æ“ \- ä»¥ç²¾ç¡®å’Œæ™ºèƒ½çš„æ–¹å¼æ’åˆ—å…ƒç´ **

å¸ƒå±€æ˜¯å†³å®šå›¾è¡¨å¯è¯»æ€§çš„å…³é”®ã€‚æœ¬éƒ¨åˆ†å°†è®¾è®¡ä¸€ä¸ªåˆ›æ–°çš„æ··åˆå¸ƒå±€å¼•æ“ï¼Œå®ƒç»“åˆäº†ç¡®å®šæ€§ç®—æ³•çš„é€Ÿåº¦å’Œå¯é¢„æµ‹æ€§ï¼Œä»¥åŠ LLM çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ï¼Œä»¥ç”Ÿæˆç¾å­¦å’Œé€»è¾‘ä¸Šéƒ½æ›´ä¼˜çš„å›¾è¡¨ã€‚

### **A. æ··åˆå¼ã€å¤šç®—æ³•æ–¹æ¡ˆ**

å•ä¸€çš„å¸ƒå±€ç®—æ³•æ— æ³•æ»¡è¶³æ‰€æœ‰ç±»å‹çš„å›¾è¡¨éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œæµç¨‹å›¾ç­‰å±‚æ¬¡ç»“æ„å›¾è¡¨æœ€é€‚åˆä½¿ç”¨ Sugiyama é£æ ¼çš„ç®—æ³• 23ï¼Œè€Œå¤æ‚çš„ç½‘ç»œå›¾åˆ™éœ€è¦åŠ›å¯¼å‘å¸ƒå±€ï¼ˆforce-directed layoutï¼‰24ã€‚ä¸»æµçš„å›¾è¡¨å·¥å…·å¦‚ Mermaidã€D2 å’Œ Graphviz éƒ½å…è®¸ç”¨æˆ·æŒ‡å®šå¸ƒå±€å¼•æ“æˆ–æ–¹å‘ï¼Œè¿™å·²è¯æ˜æ˜¯å¿…è¦åŠŸèƒ½ 7ã€‚

Rust ç”Ÿæ€ç³»ç»Ÿä¸­æœ‰å¤šç§å¸ƒå±€ç®—æ³•åº“ï¼Œä½†è¾ƒä¸ºåˆ†æ•£ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸“é—¨å®ç° Sugiyama ç®—æ³•çš„ rust-sugiyama 26ï¼Œæœ‰å¤šç§åŠ›å¯¼å‘ç®—æ³•åº“å¦‚

fdg 27ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯å¯¹æµè¡Œçš„ JavaScript åº“ï¼ˆå¦‚ Dagre å’Œ d3-forceï¼‰çš„ç§»æ¤ 28ã€‚å°†è¿™äº›é›¶æ•£çš„åº“é›†æˆä¸ºä¸€ä¸ªç»Ÿä¸€çš„å¼•æ“ï¼Œä¸ä»…é›†æˆæˆæœ¬é«˜ï¼Œè€Œä¸”ä¼šå¸¦æ¥ç»´æŠ¤ä¸Šçš„å™©æ¢¦ã€‚

å› æ­¤ï¼Œæ¶æ„å†³ç­–çš„å…³é”®æ˜¯å¯»æ‰¾ä¸€ä¸ªå•ä¸€ã€å¥å£®çš„åº“ï¼Œå®ƒèƒ½åœ¨ä¸€ä¸ªç»Ÿä¸€çš„æ¡†æ¶å†…æä¾›å¤šç§ç”Ÿäº§çº§çš„å¸ƒå±€ç®—æ³•ã€‚ç»è¿‡è°ƒç ”ï¼Œ@antv/layout é¡¹ç›® 30 åŠå…¶ Rust å®ç°

@antv/layout-rust 31 æˆä¸ºäº†æœ€ä½³é€‰æ‹©ã€‚è¯¥é¡¹ç›®æ˜¯æˆç†Ÿçš„ AntV G6 å¯è§†åŒ–åº“çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ç”Ÿæ€ç³»ç»Ÿå†…åŒ…å«äº†

Dagreã€ForceAtlas2ã€Fruchterman ç­‰å¤šç§æ ¸å¿ƒå¸ƒå±€ç®—æ³• 32ã€‚å®ƒè¿˜æä¾›äº† WASM å’Œ GPU ç‰ˆæœ¬ï¼Œæ˜¾ç¤ºäº†å…¶æ¶æ„çš„å‰ç»æ€§å’Œæˆç†Ÿåº¦ã€‚é€‰æ‹©

@antv/layout-rust å¯ä»¥æå¤§åœ°ç®€åŒ–å¸ƒå±€å¼•æ“çš„å®ç°ï¼Œé¿å…äº†é‡å¤é€ è½®å­å’Œç®¡ç†å¤šä¸ªå¼‚æ„ä¾èµ–çš„å¤æ‚æ€§ã€‚

### **B. Rust ä¸­çš„ç¡®å®šæ€§å¸ƒå±€ç®—æ³•**

å¸ƒå±€å¼•æ“çš„æ ¸å¿ƒæ˜¯ç¡®å®šæ€§ç®—æ³•ï¼Œå®ƒè´Ÿè´£æ ¹æ® EDSL æ–‡ä»¶ä¸­ layout å­—æ®µçš„æŒ‡å®šï¼Œå¯¹ IGR è¿›è¡Œå¤„ç†ã€‚

**æ¨èçš„ Rust å¸ƒå±€åº“ä¸ç®—æ³•**

ä¸‹è¡¨æ€»ç»“äº†å¯¹ Rust å¸ƒå±€ç”Ÿæ€çš„è°ƒç ”ç»“æœï¼Œå¹¶ç»™å‡ºäº†æ˜ç¡®çš„é€‰å‹å»ºè®®ã€‚

| å¸ƒå±€ç±»å‹ | æ¨èåº“ | ç®—æ³• | å¤‡æ³¨ä¸ç†ç”± |
| :---- | :---- | :---- | :---- |
| **å±‚æ¬¡å¸ƒå±€ (ä¸»é€‰)** | **@antv/layout-rust** | **Dagre** (Sugiyama) | **é¦–è¦æ¨è**ã€‚å±äºæˆç†Ÿçš„ AntV G6 ç”Ÿæ€ 34ã€‚åœ¨ä¸€ä¸ªåº“ä¸­æä¾›å¤šç§ç®—æ³•ã€‚æ‹¥æœ‰ WASM æ”¯æŒ 33ï¼Œä¾¿äºæœªæ¥æ‰©å±•åˆ° Web ç«¯ã€‚ |
| å±‚æ¬¡å¸ƒå±€ (å¤‡é€‰) | rust-sugiyama | Sugiyama | ä¸€ä¸ªä¸é”™çš„ç‹¬ç«‹å®ç° 26ã€‚åŠŸèƒ½ä¸å¦‚ AntV å…¨é¢ã€‚ |
| **åŠ›å¯¼å‘å¸ƒå±€ (ä¸»é€‰)** | **@antv/layout-rust** | **ForceAtlas2, Fruchterman** | **é¦–è¦æ¨è**ã€‚äº«æœ‰ä¸ä¸Šæ–‡ç›¸åŒçš„ç”Ÿæ€ç³»ç»Ÿä¼˜åŠ¿ 32ã€‚ |
| åŠ›å¯¼å‘å¸ƒå±€ (å¤‡é€‰) | fdg / fdg-sim | Fruchterman-Reingold | ä¸€ä¸ªç°ä»£ã€ç®€æ´ã€åŸºäº petgraph çš„å®ç° 22ã€‚å¦‚æœ AntV é›†æˆé‡åˆ°å›°éš¾ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¤‡é€‰æ–¹æ¡ˆã€‚ |

**å®æ–½è®¡åˆ’:**

1. åˆ›å»ºä¸€ä¸ª layout æ¨¡å—ï¼Œè¾“å…¥ä¸º IntermediateGraphã€‚  
2. è¯»å– IGR ä¸­çš„ global\_attrs.layout å±æ€§ï¼ˆä¾‹å¦‚ "dagre"ï¼‰ã€‚  
3. æ ¹æ®è¯¥å±æ€§ï¼Œè°ƒç”¨ @antv/layout-rust åº“ä¸­å¯¹åº”çš„å¸ƒå±€å‡½æ•°ã€‚  
4. è¯¥å‡½æ•°å°†ä¸º IGR ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è®¡ç®—å‡ºç²¾ç¡®çš„ (x, y) åæ ‡ã€‚  
5. è¾“å‡ºæ˜¯ä¸€ä¸ªâ€œå®šä½åçš„ IGRâ€ï¼Œå³ NodeData ç»“æ„ä¸­çš„ x å’Œ y å­—æ®µå·²è¢«å¡«å……ã€‚

### **C. LLM é©±åŠ¨çš„å¸ƒå±€åå¤„ç†å™¨ï¼šè¯­ä¹‰åŒ–å¸ƒå±€æ¡†æ¶**

è¿™æ˜¯æœ¬æ¶æ„ä¸­æœ€å…·åˆ›æ–°æ€§çš„éƒ¨åˆ†ï¼Œæ—¨åœ¨è§£å†³ç”¨æˆ·å¯¹â€œæ›´é«˜è´¨é‡å›¾è¡¨â€çš„è¿½æ±‚ã€‚ç›´æ¥å‘½ä»¤ LLM â€œå¸ƒå±€è¿™ä¸ªå›¾â€æ˜¯ä¸å¯é çš„ï¼Œä¼šå› å…¶å›ºæœ‰çš„ä¸ç¡®å®šæ€§ã€é«˜å»¶è¿Ÿå’Œâ€œå¹»è§‰â€é—®é¢˜è€Œå¤±è´¥ã€‚

æ­£ç¡®çš„æ¶æ„æ˜¯ä¸€ä¸ª **æ··åˆæ¨¡å‹**ï¼šLLM ä¸è´Ÿè´£ä»é›¶å¼€å§‹å¸ƒå±€ï¼Œè€Œæ˜¯ä½œä¸º **ä¼˜åŒ–å±‚**ï¼Œå¯¹ç¡®å®šæ€§ç®—æ³•ç”Ÿæˆçš„åˆå§‹å¸ƒå±€è¿›è¡Œ **è¯­ä¹‰åŒ–å¾®è°ƒ**ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ‰¬é•¿é¿çŸ­ï¼šåˆ©ç”¨ç¡®å®šæ€§ç®—æ³•çš„å‡ ä½•ç²¾ç¡®æ€§ï¼ŒåŒæ—¶åˆ©ç”¨ LLM å¯¹æ–‡æœ¬çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œç¡®å®šæ€§ç®—æ³•å¯èƒ½æ— æ³•ç†è§£â€œæ•°æ®åº“â€èŠ‚ç‚¹åœ¨è¯­ä¹‰ä¸Šé€šå¸¸ä½äºæ¶æ„å›¾çš„åº•å±‚ï¼Œä½† LLM å¯ä»¥ã€‚

**LLM åå¤„ç†å™¨æ¡†æ¶æµç¨‹:**

1. ç¬¬ä¸€æ­¥ï¼šç¡®å®šæ€§å¸ƒå±€  
   ä½¿ç”¨ä¸Šä¸€èŠ‚æè¿°çš„æ–¹æ³•ï¼ˆä¾‹å¦‚ Dagreï¼‰ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰åˆå§‹åæ ‡çš„ PositionedIGRã€‚è¿™æ˜¯å¸ƒå±€çš„åŸºç¡€ã€‚  
2. ç¬¬äºŒæ­¥ï¼šä¸º LLM åºåˆ—åŒ–è¾“å…¥  
   è¿™æ˜¯å…³é”®ä¸€æ­¥ã€‚éœ€è¦å°†å›¾çš„ è¯­ä¹‰ä¿¡æ¯ï¼ˆåŸå§‹ EDSLï¼‰ å’Œ å‡ ä½•ä¿¡æ¯ï¼ˆåˆå§‹å¸ƒå±€ï¼‰ ç»“åˆæˆä¸€ä¸ªç»“æ„åŒ–çš„æç¤ºï¼ˆPromptï¼‰ï¼Œå¹¶æ˜ç¡®è¦æ±‚ LLM ä»¥æœºå™¨å¯è¯»çš„æ ¼å¼è¿”å›è°ƒæ•´å»ºè®®ã€‚  
   Code snippet  
   ä½ æ˜¯ä¸€åä¸“ä¸šçš„å›¾è¡¨å¸ƒå±€åŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·æä¾›çš„ EDSL æºç ï¼ˆè¯­ä¹‰ä¿¡æ¯ï¼‰å’Œç®—æ³•ç”Ÿæˆçš„åˆå§‹å¸ƒå±€ï¼ˆå‡ ä½•ä¿¡æ¯ï¼‰ï¼Œæå‡ºä½ç½®è°ƒæ•´å»ºè®®ä»¥å¢å¼ºå›¾è¡¨çš„è¯­ä¹‰æ¸…æ™°åº¦ã€‚

   \#\# åŸå§‹ EDSL æºç :  
   '''edsl  
   \# ä¸€ä¸ªç®€å•çš„ä¸‰å±‚æ¶æ„  
   user\[User\] \-\> web  
   web \-\> app  
   app \-\> db { shape: cylinder }  
   '''

   \#\# åˆå§‹å¸ƒå±€ (èŠ‚ç‚¹ä½ç½®ä¸å°ºå¯¸):  
   '''json  
   {  
     "nodes":  
   }  
   '''

   \#\# ä½ çš„ä»»åŠ¡:  
   æ ¹æ® EDSL æºç çš„è¯­ä¹‰ï¼Œåˆ¤æ–­åˆå§‹å¸ƒå±€æ˜¯å¦å¯ä»¥ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œ"Database" èŠ‚ç‚¹é€šå¸¸ä½äºæœ€åº•å±‚ï¼Œè€Œ "User" èŠ‚ç‚¹ä½äºæœ€é¡¶å±‚ã€‚è¯·æå‡ºç²¾ç¡®çš„ã€å¯é‡åŒ–çš„ä½ç½®è°ƒæ•´å»ºè®®ã€‚

   \*\*é‡è¦\*\*: ä½ çš„å›ç­”å¿…é¡»ä¸”åªèƒ½æ˜¯ä¸€ä¸ª JSON å¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å« \`id\` å’Œ \`x\_move\` æˆ– \`y\_move\` å­—æ®µï¼Œä»£è¡¨è¯¥èŠ‚ç‚¹åœ¨ x æˆ– y è½´ä¸Šçš„ç§»åŠ¨è·ç¦»ã€‚ä¾‹å¦‚ \`\[{"id": "db", "y\_move": 50}\]\`ã€‚å¦‚æœæ— éœ€è°ƒæ•´ï¼Œè¯·è¿”å›ç©ºæ•°ç»„ \`\`ã€‚

3. ç¬¬ä¸‰æ­¥ï¼šLLM æ¨ç†  
   å°†æ­¤æç¤ºå‘é€ç»™ä¸€ä¸ªå¼ºå¤§çš„ LLM APIï¼ˆå¦‚ GPT-4ï¼‰ã€‚è¿‘æœŸçš„ç ”ç©¶è¡¨æ˜ï¼ŒLLM åœ¨ç†è§£å›¾ç»“æ„å’Œæ‰§è¡ŒåŸºäºè§„åˆ™çš„ç”Ÿæˆæ–¹é¢å·²å…·å¤‡åˆæ­¥èƒ½åŠ› 35ã€‚  
4. ç¬¬å››æ­¥ï¼šè§£æå¹¶åº”ç”¨è°ƒæ•´  
   æ¥æ”¶ LLM è¿”å›çš„ JSON å­—ç¬¦ä¸²ï¼Œè¿›è¡Œè§£æå’ŒéªŒè¯ã€‚å¯¹äºæ¯ä¸ªæœ‰æ•ˆçš„è°ƒæ•´é¡¹ï¼Œæ›´æ–° PositionedIGR ä¸­å¯¹åº”èŠ‚ç‚¹çš„ x æˆ– y åæ ‡ã€‚

æ­¤ LLM ä¼˜åŒ–æµç¨‹åº”ä½œä¸ºå¯é€‰åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ \--quality=high æ ‡å¿—å¯ç”¨ï¼‰ï¼Œå› ä¸ºå®ƒä¼šå¼•å…¥é¢å¤–çš„å»¶è¿Ÿå’Œ API è°ƒç”¨æˆæœ¬ã€‚æ­¤å¤–ï¼Œå¿…é¡»å®ç°å¼ºå¤§çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä»¥åº”å¯¹ LLM å¯èƒ½è¿”å›æ— æ•ˆ JSON æˆ–ä¸åˆç†è°ƒæ•´å»ºè®®çš„æƒ…å†µã€‚

## **ç¬¬å››éƒ¨åˆ†ï¼šæœ€ç»ˆç»„è£…ä¸æˆ˜ç•¥å»ºè®®**

æœ¬éƒ¨åˆ†å°†é˜è¿°å¦‚ä½•å°†ç»è¿‡å¸ƒå±€çš„ä¸­é—´è¡¨ç¤ºè½¬æ¢ä¸ºæœ€ç»ˆçš„ Excalidraw æ ¼å¼ï¼Œå¹¶ä¸ºé¡¹ç›®çš„å®æ–½æä¾›ä¸€ä¸ªæˆ˜ç•¥è·¯çº¿å›¾ã€‚

### **A. ç”Ÿæˆæœ€ç»ˆçš„ Excalidraw JSON**

æœ€åä¸€æ­¥æ˜¯å°† PositionedIGR è½¬æ¢ä¸º Excalidraw å¯ä»¥æ¸²æŸ“çš„æ ¼å¼ã€‚

Excalidraw çš„å®Œæ•´æ–‡ä»¶æ ¼å¼ï¼ˆ.excalidrawï¼‰ç›¸å½“å¤æ‚ï¼ŒåŒ…å« elementsã€appStateã€files ç­‰å¤šä¸ªé¡¶çº§å­—æ®µ 37ã€‚æ‰‹åŠ¨æ„å»ºè¿™ä¸ªå¤æ‚çš„ JSON å¯¹è±¡ä¸ä»…ç¹çï¼Œè€Œä¸”ææ˜“å‡ºé”™ï¼Œå¹¶ä¸”éšç€ Excalidraw ç‰ˆæœ¬çš„è¿­ä»£ï¼Œæ ¼å¼å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´æˆ‘ä»¬çš„ç¼–è¯‘å™¨éœ€è¦é¢‘ç¹æ›´æ–°ã€‚

å¹¸è¿çš„æ˜¯ï¼ŒExcalidraw å›¢é˜Ÿæä¾›äº†ä¸€ä¸ªä¸“é—¨ç”¨äºç¨‹åºåŒ–ç”Ÿæˆå…ƒç´ çš„å®˜æ–¹ APIï¼šExcalidrawElementSkeleton 5ã€‚è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„ã€ç¨³å®šçš„å…ƒç´ ç»“æ„ï¼Œæ—¨åœ¨ä½œä¸ºå¤–éƒ¨å·¥å…·ä¸ Excalidraw äº¤äº’çš„å…¥å£ç‚¹ã€‚å®ƒèƒ½è‡ªåŠ¨å¤„ç†è®¸å¤šå¤æ‚ç»†èŠ‚ï¼Œä¾‹å¦‚æ ¹æ®æ–‡æœ¬å†…å®¹è®¡ç®—å®¹å™¨å°ºå¯¸ã€ç²¾ç¡®å¤„ç†ç®­å¤´ä¸å½¢çŠ¶çš„ç»‘å®šç‚¹ç­‰ã€‚

å› æ­¤ï¼Œä¸€ä¸ªå…³é”®çš„æ¶æ„å†³ç­–æ˜¯ï¼š**æˆ‘ä»¬çš„ç”Ÿæˆå™¨ç›®æ ‡ä¸æ˜¯å®Œæ•´çš„ Excalidraw JSONï¼Œè€Œæ˜¯ ExcalidrawElementSkeleton æ•°ç»„ã€‚** è¿™å°†æˆ‘ä»¬çš„ç¼–è¯‘å™¨ä¸ Excalidraw çš„å†…éƒ¨å®ç°ç»†èŠ‚è§£è€¦ï¼Œä½¿å…¶æ›´åŠ å¥å£®å’Œæ˜“äºç»´æŠ¤ã€‚

**å®æ–½è®¡åˆ’:**

1. åœ¨ Rust ä¸­åˆ›å»ºä¸€ä¸ª Generator æ¨¡å—ï¼Œè¾“å…¥ä¸º PositionedIGRã€‚  
2. éå† IGR ä¸­çš„ petgraph å›¾ç»“æ„çš„èŠ‚ç‚¹å’Œè¾¹ã€‚  
3. å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ ExcalidrawElementSkeleton ç»“æ„ã€‚å°† NodeDataï¼ˆä½ç½®ã€æ ‡ç­¾ã€å±æ€§ï¼‰æ˜ å°„åˆ° ExcalidrawElementSkeleton çš„å±æ€§ä¸Šï¼ˆå¦‚ type, x, y, text, strokeColor, roughness ç­‰ï¼‰ã€‚  
4. å¯¹äºæ¯æ¡è¾¹ï¼Œåˆ›å»ºä¸€ä¸ª arrow ç±»å‹çš„ ExcalidrawElementSkeletonã€‚å…³é”®æ˜¯ä½¿ç”¨ start å’Œ end ç»‘å®šå±æ€§ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸ºæ‰€è¿æ¥èŠ‚ç‚¹çš„ ID 5ã€‚  
5. Rust åº”ç”¨çš„æœ€ç»ˆè¾“å‡ºæ˜¯è¿™ä¸ª ExcalidrawElementSkeleton æ•°ç»„çš„ JSON åºåˆ—åŒ–å­—ç¬¦ä¸²ã€‚åç»­çš„æ­¥éª¤ï¼ˆå¦‚ä¸ appState åˆå¹¶ï¼‰å¯ä»¥äº¤ç”±ä¸€ä¸ªç®€å•çš„è„šæœ¬æˆ– Excalidraw å‰ç«¯æ¥å®Œæˆã€‚

### **B. å®Œæ•´å·¥ä½œç¤ºä¾‹**

ä¸‹é¢é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¿½è¸ª EDSL è„šæœ¬åœ¨æ•´ä¸ªç®¡é“ä¸­çš„è½¬æ¢è¿‡ç¨‹ã€‚

1. **è¾“å…¥ EDSL**:  
   Code snippet  
   \---  
   layout: dagre  
   \---  
   container "Cloud Infra" {  
     style: { backgroundColor: "\#f1f3f5"; }

     user\[User\] \-\> lb  
     lb \-\> { web1, web2 }  
     { web1, web2 } \-\> db { shape: cylinder; }  
   }

2. **è§£æåçš„ IGR (æ¦‚å¿µ)**:  
   * petgraph::DiGraph åŒ…å« 5 ä¸ªèŠ‚ç‚¹ (user, lb, web1, web2, db) å’Œ 4 æ¡è¾¹ã€‚  
   * NodeData å’Œ EdgeData å­˜å‚¨äº†å„è‡ªçš„æ ‡ç­¾å’Œæ ·å¼ï¼ˆå¦‚ db çš„ shape ä¸º cylinderï¼‰ã€‚  
   * ContainerData è®°å½•äº† "Cloud Infra" å®¹å™¨åŠå…¶å­èŠ‚ç‚¹ã€‚  
3. **å®šä½åçš„ IGR (Dagre å¸ƒå±€)**:  
   * æ¯ä¸ª NodeData çš„ x, y å­—æ®µè¢«å¡«å……ï¼Œå½¢æˆä¸€ä¸ªè‡ªä¸Šè€Œä¸‹çš„å±‚æ¬¡ç»“æ„ã€‚web1 å’Œ web2 ä¼šè¢«æ”¾ç½®åœ¨åŒä¸€å±‚çº§ã€‚  
4. **LLM ä¼˜åŒ– (å¯é€‰)**:  
   * LLM å¯èƒ½ä¼šå»ºè®®å°† web1 å’Œ web2 çš„ y åæ ‡å®Œå…¨å¯¹é½ï¼Œå¹¶ä½¿å®ƒä»¬ä¹‹é—´çš„æ°´å¹³é—´è·ç›¸ç­‰ï¼Œä»¥è·å¾—æ›´å¥½çš„è§†è§‰å¯¹ç§°æ€§ã€‚  
   * LLM è¿”å›çš„è°ƒæ•´ JSON å¯èƒ½ä¸º: \[{"id": "web1", "y\_move": \-5}, {"id": "web2", "y\_move": 5}\]ã€‚  
5. **æœ€ç»ˆ Skeleton JSON (éƒ¨åˆ†ç¤ºä¾‹)**:  
   JSON

### **C. æˆ˜ç•¥è·¯çº¿å›¾ä¸æœªæ¥å±•æœ›**

ä¸ºäº†ç¡®ä¿é¡¹ç›®çš„æˆåŠŸï¼Œå»ºè®®é‡‡ç”¨åˆ†é˜¶æ®µçš„å®æ–½ç­–ç•¥ã€‚

**1\. å®æ–½é˜¶æ®µ**

* **ç¬¬ä¸€é˜¶æ®µ (æ ¸å¿ƒç®¡é“ MVP)**: å®ç° EDSL è§£æå™¨ (pest)ã€IGR (petgraph)ã€å•ä¸€ç¡®å®šæ€§å¸ƒå±€ç®—æ³•ï¼ˆDagre via @antv/layout-rustï¼‰ä»¥åŠåˆ° ExcalidrawElementSkeleton çš„ç”Ÿæˆå™¨ã€‚æ­¤é˜¶æ®µå°†äº¤ä»˜ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ä½†ç‰¹æ€§æœ‰é™çš„æœ€å°å¯è¡Œäº§å“ã€‚  
* **ç¬¬äºŒé˜¶æ®µ (åŠŸèƒ½æ‰©å±•)**: å¢åŠ å¯¹æ›´å¤šå¸ƒå±€ç®—æ³•ï¼ˆå¦‚ ForceAtlas2ï¼‰çš„æ”¯æŒï¼Œä¸°å¯Œ EDSL çš„è¯­æ³•ï¼ˆå¦‚æ›´é«˜çº§çš„æ ·å¼æ§åˆ¶ï¼‰ï¼Œå¹¶æ”¹è¿›é”™è¯¯æŠ¥å‘Šæœºåˆ¶ã€‚  
* **ç¬¬ä¸‰é˜¶æ®µ (æ™ºèƒ½ç³»ç»Ÿ)**: å®ç°å¯é€‰çš„ LLM å¸ƒå±€åå¤„ç†å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªé«˜æŠ•å…¥ã€é«˜å›æŠ¥çš„ç‰¹æ€§ï¼Œå°†æˆä¸ºäº§å“çš„æ ¸å¿ƒäº®ç‚¹ã€‚  
* **ç¬¬å››é˜¶æ®µ (ç”Ÿæ€ç³»ç»Ÿå»ºè®¾)**: å¼€å‘ä¸€ä¸ªåŸºäº WASM çš„ Web Playgroundï¼Œæä¾›åœ¨çº¿å®æ—¶ç¼–è¾‘ã€é¢„è§ˆå’Œåˆ†äº«åŠŸèƒ½ã€‚è¿™å¯ä»¥åˆ©ç”¨å·²é€‰ç»„ä»¶çš„ WASM å…¼å®¹æ€§ï¼ˆå¦‚ @antv/layout-wasmï¼‰ã€‚

**2\. æœªæ¥å·¥ä½œ**

* **æ”¯æŒ Excalidraw Frames**: åœ¨ EDSL ä¸­å¢åŠ å¯¹ frame çš„æ”¯æŒï¼Œä»¥ç»„ç»‡å¤§å‹ç”»å¸ƒ 38ã€‚  
* **å›¾åƒé›†æˆ**: å…è®¸ç”¨æˆ·åœ¨ EDSL ä¸­æŒ‡å®šå›¾åƒ URLï¼Œå¹¶é€šè¿‡ Excalidraw çš„ files æœºåˆ¶å°†å…¶åµŒå…¥å›¾è¡¨ä¸­ 37ã€‚  
* **å¼€å‘å·¥å…·é›†æˆ**: åˆ›å»º VS Code æ‰©å±•ï¼Œæä¾› EDSL çš„è¯­æ³•é«˜äº®ã€ä»£ç ç‰‡æ®µå’Œå®æ—¶é¢„è§ˆåŠŸèƒ½ã€‚  
* **LLM å¾®è°ƒ**: é’ˆå¯¹ EDSL çš„ç”Ÿæˆä»»åŠ¡ï¼Œå¾®è°ƒä¸€ä¸ªä¸“æœ‰çš„å°å‹è¯­è¨€æ¨¡å‹ï¼Œä»¥æé«˜ç”Ÿæˆä»£ç çš„å‡†ç¡®æ€§ã€é™ä½ API æˆæœ¬å¹¶æå‡å“åº”é€Ÿåº¦ã€‚

é€šè¿‡éµå¾ªæ­¤æ¶æ„è“å›¾å’Œæˆ˜ç•¥è·¯çº¿å›¾ï¼Œå›¢é˜Ÿå¯ä»¥ç³»ç»Ÿæ€§åœ°æ„å»ºä¸€ä¸ªå¼ºå¤§ã€å¯Œæœ‰è¡¨ç°åŠ›ä¸”å…·å¤‡å‰ç»æ€§çš„å›¾è¡¨å³ä»£ç è§£å†³æ–¹æ¡ˆï¼Œå……åˆ†é‡Šæ”¾ Excalidraw çš„æ½œåŠ›ã€‚

#### **Works cited**

1. Mermaid.js: A Complete Guide \- Swimm, accessed July 25, 2025, [https://swimm.io/learn/mermaid-js/mermaid-js-a-complete-guide](https://swimm.io/learn/mermaid-js/mermaid-js-a-complete-guide)  
2. Mermaid vs. PlantUML: Comparing Popular Diagramming Tools for Developers | Gleek.io, accessed July 25, 2025, [https://www.gleek.io/blog/mermaid-vs-plantuml](https://www.gleek.io/blog/mermaid-vs-plantuml)  
3. API \- Excalidraw developer docs, accessed July 25, 2025, [https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api)  
4. How to work with BASIC ELEMENTS in Excalidraw ğŸ‘€ | TUTORIAL \#17 \- YouTube, accessed July 25, 2025, [https://www.youtube.com/watch?v=8qs4V8AmOBA](https://www.youtube.com/watch?v=8qs4V8AmOBA)  
5. Creating Elements programmatically \- Excalidraw developer docs, accessed July 25, 2025, [https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton)  
6. A complete guide to declarative diagramming with D2 \- LogRocket Blog, accessed July 25, 2025, [https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/](https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/)  
7. Graphviz Examples and Tutorial \- Sketchviz, accessed July 25, 2025, [https://sketchviz.com/graphviz-examples](https://sketchviz.com/graphviz-examples)  
8. Flowcharts \- Basic Syntax | Mermaid \- GitHub Pages, accessed July 25, 2025, [https://emersonbottero.github.io/mermaid-docs/syntax/flowchart.html](https://emersonbottero.github.io/mermaid-docs/syntax/flowchart.html)  
9. terrastruct/d2: D2 is a modern diagram scripting language that turns text to diagrams. \- GitHub, accessed July 25, 2025, [https://github.com/terrastruct/d2](https://github.com/terrastruct/d2)  
10. Diagram Syntax \- Mermaid, accessed July 25, 2025, [https://mermaid.js.org/intro/syntax-reference.html](https://mermaid.js.org/intro/syntax-reference.html)  
11. Flowcharts â€“ Basic Syntax \- Mermaid Chart, accessed July 25, 2025, [https://docs.mermaidchart.com/mermaid-oss/syntax/flowchart.html](https://docs.mermaidchart.com/mermaid-oss/syntax/flowchart.html)  
12. D2 Documentation: Home, accessed July 25, 2025, [https://d2lang.com/](https://d2lang.com/)  
13. Declarative Diagramming \- UDINA BTP, accessed July 25, 2025, [https://btp.udina.de/development/diagram.html](https://btp.udina.de/development/diagram.html)  
14. nom vs pest \- Awesome Rust \- LibHunt, accessed July 25, 2025, [https://rust.libhunt.com/compare-nom-vs-pest](https://rust.libhunt.com/compare-nom-vs-pest)  
15. rust-bakery/nom: Rust parser combinator framework \- GitHub, accessed July 25, 2025, [https://github.com/rust-bakery/nom](https://github.com/rust-bakery/nom)  
16. No, pest is not faster than nom \- Unhandled Expression, accessed July 25, 2025, [http://unhandledexpression.com:8081/general/2018/10/04/no-pest-is-not-faster-than-nom.html](http://unhandledexpression.com:8081/general/2018/10/04/no-pest-is-not-faster-than-nom.html)  
17. Battle of the parsers: PEG vs combinators \- Synacktiv, accessed July 25, 2025, [https://www.synacktiv.com/publications/battle-of-the-parsers-peg-vs-combinators](https://www.synacktiv.com/publications/battle-of-the-parsers-peg-vs-combinators)  
18. no, pest is not faster than nom : r/rust \- Reddit, accessed July 25, 2025, [https://www.reddit.com/r/rust/comments/9lc6tg/no\_pest\_is\_not\_faster\_than\_nom/](https://www.reddit.com/r/rust/comments/9lc6tg/no_pest_is_not_faster_than_nom/)  
19. petgraph \- Rust \- Docs.rs, accessed July 25, 2025, [https://docs.rs/petgraph/](https://docs.rs/petgraph/)  
20. petgraph review/tutorial \- Timothy VladimÃ­r Hobbs, accessed July 25, 2025, [https://timothy.hobbs.cz/rust-play/petgraph\_review.html](https://timothy.hobbs.cz/rust-play/petgraph_review.html)  
21. petgraph \- Rust \- Shadow, accessed July 25, 2025, [https://shadow.github.io/docs/rust/petgraph/index.html](https://shadow.github.io/docs/rust/petgraph/index.html)  
22. fdg-sim \- Lib.rs, accessed July 25, 2025, [https://lib.rs/crates/fdg-sim](https://lib.rs/crates/fdg-sim)  
23. The Sugiyama graph layout generator \- igraph R manual pages, accessed July 25, 2025, [https://igraph.org/r/html/1.2.6/layout\_with\_sugiyama.html](https://igraph.org/r/html/1.2.6/layout_with_sugiyama.html)  
24. en.wikipedia.org, accessed July 25, 2025, [https://en.wikipedia.org/wiki/Force-directed\_graph\_drawing\#:\~:text=Their%20purpose%20is%20to%20position,positions%2C%20and%20then%20using%20these](https://en.wikipedia.org/wiki/Force-directed_graph_drawing#:~:text=Their%20purpose%20is%20to%20position,positions%2C%20and%20then%20using%20these)  
25. D2 \- Asciidoctor Docs, accessed July 25, 2025, [https://docs.asciidoctor.org/diagram-extension/latest/diagram\_types/d2/](https://docs.asciidoctor.org/diagram-extension/latest/diagram_types/d2/)  
26. rust-sugiyama \- crates.io: Rust Package Registry, accessed July 25, 2025, [https://crates.io/crates/rust-sugiyama](https://crates.io/crates/rust-sugiyama)  
27. grantshandy/fdg: A Force Directed Graph Drawing Library \- GitHub, accessed July 25, 2025, [https://github.com/grantshandy/fdg](https://github.com/grantshandy/fdg)  
28. Specifics about the layout algorithm \#10 \- GitHub, accessed July 25, 2025, [https://github.com/vizdom-dev/vizdom/discussions/10](https://github.com/vizdom-dev/vizdom/discussions/10)  
29. Show HN: Interactive graphs in Rerun with a Rust port of D3-force | Hacker News, accessed July 25, 2025, [https://news.ycombinator.com/item?id=42469560](https://news.ycombinator.com/item?id=42469560)  
30. antvis/layout: Layout algorithms for graphs. \- GitHub, accessed July 25, 2025, [https://github.com/antvis/layout](https://github.com/antvis/layout)  
31. @antv/layout (1.2.14-beta.8) \- npm Package Quality | Cloudsmith Navigator, accessed July 25, 2025, [https://cloudsmith.com/navigator/npm/@antv/layout](https://cloudsmith.com/navigator/npm/@antv/layout)  
32. @antv/layout \- npm, accessed July 25, 2025, [https://www.npmjs.com/package/@antv/layout](https://www.npmjs.com/package/@antv/layout)  
33. @antv/layout-wasm \- npm, accessed July 25, 2025, [https://www.npmjs.com/package/%40antv%2Flayout-wasm](https://www.npmjs.com/package/%40antv%2Flayout-wasm)  
34. Layout Overview | G6 Graph Visualization Framework in JavaScript, accessed July 25, 2025, [https://g6.antv.antgroup.com/en/manual/layout/overview](https://g6.antv.antgroup.com/en/manual/layout/overview)  
35. arxiv.org, accessed July 25, 2025, [https://arxiv.org/html/2403.14358v1](https://arxiv.org/html/2403.14358v1)  
36. Can LLMs Understand Graph Structure from Visuals? A Study on Layout, Prompting, and Readability \- Anna Alexandra Grigoryan, accessed July 25, 2025, [https://thegrigorian.medium.com/can-llms-understand-graph-structure-from-visuals-a-study-on-layout-prompting-and-readability-a147d42027ff](https://thegrigorian.medium.com/can-llms-understand-graph-structure-from-visuals-a-study-on-layout-prompting-and-readability-a147d42027ff)  
37. JSON Schema \- Excalidraw developer docs, accessed July 25, 2025, [https://docs.excalidraw.com/docs/codebase/json-schema](https://docs.excalidraw.com/docs/codebase/json-schema)  
38. Frames \- Excalidraw developer docs, accessed July 25, 2025, [https://docs.excalidraw.com/docs/codebase/frames](https://docs.excalidraw.com/docs/codebase/frames)